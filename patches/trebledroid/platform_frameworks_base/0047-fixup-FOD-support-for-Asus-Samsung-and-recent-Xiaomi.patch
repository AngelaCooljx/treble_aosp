From 6dcde22d24a00566e6828bc6b89f79e598f30435 Mon Sep 17 00:00:00 2001
From: Pierre-Hugues Husson <phh@phh.me>
Date: Fri, 20 Oct 2023 13:40:56 -0400
Subject: [PATCH 47/47] fixup! FOD support for Asus, Samsung and recent Xiaomi
 devices

---
 .../SystemUI/src/com/android/systemui/biometrics/UdfpsView.kt   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/packages/SystemUI/src/com/android/systemui/biometrics/UdfpsView.kt b/packages/SystemUI/src/com/android/systemui/biometrics/UdfpsView.kt
index 084fcb8d260f..f86e8436b608 100644
--- a/packages/SystemUI/src/com/android/systemui/biometrics/UdfpsView.kt
+++ b/packages/SystemUI/src/com/android/systemui/biometrics/UdfpsView.kt
@@ -82,7 +82,7 @@ class UdfpsView(
                 try {
                     canvas = p0.lockCanvas();
                     Log.d("PHH", "Surface dimensions ${canvas.getWidth()*1.0f} ${canvas.getHeight()*1.0f}")
-                    canvas.drawOval(RectF(0.0f, 0.0f, canvas.getWidth()*1.0f, canvas.getHeight()*1.0f), paint);
+                    canvas.drawOval(RectF(overlayParams.sensorBounds), paint);
                 } finally {
                     // Make sure the surface is never left in a bad state.
                     if (canvas != null) {
-- 
2.34.1

