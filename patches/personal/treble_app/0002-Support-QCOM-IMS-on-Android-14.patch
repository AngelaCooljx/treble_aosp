From 1ac1840a95a3d135876af019856470ee54d4827d Mon Sep 17 00:00:00 2001
From: Andy CrossGate Yan <GeForce8800Ultra@gmail.com>
Date: Sat, 2 Sep 2023 18:20:32 +0800
Subject: [PATCH 2/2] Support QCOM IMS on Android 14

---
 app/src/main/java/me/phh/treble/app/ImsSettings.kt | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/app/src/main/java/me/phh/treble/app/ImsSettings.kt b/app/src/main/java/me/phh/treble/app/ImsSettings.kt
index 0e344be..44f453a 100644
--- a/app/src/main/java/me/phh/treble/app/ImsSettings.kt
+++ b/app/src/main/java/me/phh/treble/app/ImsSettings.kt
@@ -8,6 +8,7 @@ import android.content.*
 import android.content.pm.PackageInstaller
 import android.hardware.display.DisplayManager
 import android.net.Uri
+import android.os.Build
 import android.os.Bundle
 import android.os.Environment
 import android.os.StrictMode
@@ -101,6 +102,8 @@ class ImsSettingsFragment : SettingsFragment() {
                     Ims.gotMtkQ -> Pair("https://treble.phh.me/stable/ims-mtk-q.apk", "MediaTek Q vendor")
                     Ims.gotMtkR -> Pair("https://treble.phh.me/stable/ims-mtk-r.apk", "MediaTek R vendor")
                     Ims.gotMtkS -> Pair("https://treble.phh.me/stable/ims-mtk-s.apk", "MediaTek S vendor")
+                    (Ims.gotQcomHidl || Ims.gotQcomAidl) && Build.VERSION.SDK_INT >= 34
+                        -> Pair("https://treble.phh.me/ims-caf-u.apk", "Qualcomm vendor")
                     Ims.gotQcomHidlMoto -> Pair("https://treble.phh.me/stable/ims-caf-moto.apk", "Qualcomm pre-S vendor (Motorola)")
                     Ims.gotQcomHidl -> Pair("https://treble.phh.me/stable/ims-q.64.apk", "Qualcomm pre-S vendor")
                     Ims.gotQcomAidl -> Pair("https://treble.phh.me/stable/ims-caf-s.apk", "Qualcomm S+ vendor")
-- 
2.34.1

